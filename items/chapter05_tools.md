# 5장. 도구

## 자동화된 리팩토링 도구

이 책에서는 리팩토링 도구를 사용하는 작업인지 사용하지 않는 작업인지를 구분해서 설명하겠다. 

그리고 사용하는 리팩토링 도구가 행위를 변경하지 않는 안전성을 제공한다고 가정하겠다. 행위를 변경시키는 리팩토링 도구는 사용하지 않는 편이 낫다. 리팩토링 도구를 100% 신뢰할 수 없다면, 자동화된 리팩토링 전에 테스트를 먼저 작성하라.

## *Mock* 객체

다른 코드와의 의존성을 제거한 곳을 대신 채우고, 테스트 대상이 되는 코드가 구석구석 실행될 수 있도록 테스트 대상 코드와 적절하게 협력하는 객체.

www.mockobjects.com 에서 여러가지 *mock* 객체 라이브러리를 찾을 수 있음.

## 단위 테스트 틀(*Harness*)

가장 효과적인 테스트 도구는 xUnit 테스팅 프레임워크(무료)였다. (값 비싼 테스트 도구를 사용하는 팀을 여럿 봤지만 제값 하는 도구는 없었다) xUnit은 다음과 같은 핵심 개념을 담고 있는 단위 테스트 도구다.

* 프로덕션 코드와 같은 언어로 테스트를 작성한다.
* 모든 테스트는 격리 상태에서 실행된다.
* 반복적으로 재실행할 수 있는 테스트 묶음(suite)으로 구성할 수 있다.

이 책의 대부분의 예제 코드는 Java와 C++로 되어 있다. Java 예제에서는 JUnit을 이용하고 C++ 예제에서는 CppUnitLite를 이용한다.

### JUnit

*(설명 생략)*

### CppUnitLite

 JUnit과 최대한 비슷하게 CppUnit을 만들어보려고 했으나 Java와 C++의 기능 차이 때문에 어려움이 많았다. 특히 C++에는 *reflection* 개념이 없기 때문에 개발자가 테스트 메써드를 직접 프레임워크에 등록해야 한다. 또한 JUnit을 따라한 형태로는 테스트를 위해 헤더 파일과 소스 파일을 따로 작성해야 했다.

xUnit과는 구조나 테스트 코드 작성 방식이 다르지만, C++의 최근 기능을 사용하지 않는 대신 C 스타일의 매크로 기법을 사용하여 소스 파일에만 간단하게 테스트를 작성할 수 있다.

### NUnit
