# 4장. 이음매 모델 (The Seam Model)

## 이음매 (Seams)

*설계가 얼마나 잘 되어 있든 상관없이, 테스트를 위해 클래스를 프로젝트에서 끄집어내는 데는 꽤 많은 (의존성 끊기) 작업이 필요하다. 이런 작업은 좋은 설계와 소프트웨어에 대한 생각을 바꾸어버린다.*

이음매: 그 지점을 직접 수정하지 않고도 프로그램의 동작을 변경할 수 있는 지점.

이음매 부분의 행위를 바꿔치기 할 수 있다면

* 테스트를 위해 의존성을 제거하거나
* *Fake collaborator*를 주입하여 테스트 대상의 동작 방식을 감지할 수 있다.

## 이음매의 종류

사용 가능한 이음매의 종류는 프로그래밍 언어에 따라 다르다.

### 전처리 이음매 (Preprocessing Seams)

C, C++처럼 컴파일 전에 전처리 단계가 있는 소수의 프로그래밍 언어에만 해당.

프로덕션 코드에서 단순 텍스트 치환을 넘어서는 전처리 기능을 많이 이용하는 것은 나쁘다.

*Enabling point*: 이음매의 행위를 선택할 수 있는 지점. 모든 이음매마다 존재함.

* 예: `#ifdef TESTING`

### 링크 이음매 (Link Seams)

컴파일러가 중간 결과물을 생성하고 이런 중간 결과물들을 연결되어 하나의 프로그램으로서 동작할 수 있는 종류의 프로그래밍 언어에 해당. C, C++ 외에 Java 같은 언어도 포함.

